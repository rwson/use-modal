{"version":3,"file":"vue.cjs.production.min.js","sources":["../../src/enums.ts","../../src/state.ts","../../src/plugin.ts","../../src/method.ts","../../src/component.ts"],"sourcesContent":["export enum ModalActionType {\n  OpenModal = 0,\n  UpdateModal = 1,\n  CloseModal = 2,\n  CloseAllModals = 3,\n  RegisterModal = 4,\n  RemoveModal = 5\n}\n","import Vue from 'vue'\n\nimport { ModalActionType } from './enums'\n\ninterface UpdateStatePayload {\n  readonly type: ModalActionType\n  readonly payload?: {\n    readonly id?: string\n    readonly props?: Record<string, any>\n    readonly merge?: boolean\n  }\n}\n\nexport const state = Vue.observable<Record<string, Record<string, any>>>({})\n\nexport const mutation = (value: UpdateStatePayload) => {\n  const { type, payload } = value\n\n  switch (type) {\n    case ModalActionType.OpenModal:\n      if (!state[payload?.id!]) {\n        throw new Error(`modal '${payload?.id}' not exist, please register it before your use`)\n      }\n      state[payload?.id!].visible = true\n      state[payload?.id!].props = payload?.props!\n    break\n\n    case ModalActionType.CloseModal:\n      state[payload?.id!].visible = false\n      break\n\n    case ModalActionType.UpdateModal:\n      if (!state[payload?.id!]) {\n        throw new Error(`modal '${payload?.id}' not exist, please register it before your use`)\n      }\n      const originProps = state[payload?.id!].props ?? {}\n      state[payload?.id!].props = payload?.merge ? {\n        ...originProps,\n        ...payload?.props!\n      } : payload?.props!\n      break\n\n    case ModalActionType.CloseAllModals:\n      Object.keys(state).forEach((key) => {\n        state[key].visible = false\n      })\n      break\n\n    case ModalActionType.RegisterModal:\n      Vue.set(state, payload?.id!, {\n        visible: false,\n        props: {}\n      })\n      break\n\n    case ModalActionType.RemoveModal:\n      delete state[payload?.id!]\n      break\n\n    default:\n      break\n  }\n}\n","import Vue from 'vue'\n\nimport { injectMethods } from './method'\nimport { installComponent } from './component'\n\nexport const install = (vm: typeof Vue) => {\n  injectMethods(vm)\n  installComponent(vm)\n}\n","import Vue from 'vue'\nimport { ModalActionType } from './enums'\nimport { mutation } from './state'\n\nexport const injectMethods = (vm: typeof Vue) => {\n  vm.prototype.__registerModal__ = (id: string) => mutation({\n    type: ModalActionType.RegisterModal,\n    payload: {\n      id\n    }\n  })\n\n  vm.prototype.__removeModal__ = (id: string) => mutation({\n    type: ModalActionType.RemoveModal,\n    payload: {\n      id\n    }\n  })\n\n  vm.prototype.openModal = (id: string, props?: Record<string, any>) => mutation({\n    type: ModalActionType.OpenModal,\n    payload: {\n      id,\n      props\n    }    \n  })\n\n  vm.prototype.updateModal = (id: string, props: Record<string, any>, merge?: boolean) => mutation({\n    type: ModalActionType.UpdateModal,\n    payload: {\n      id,\n      props,\n      merge\n    }\n  })\n\n  vm.prototype.closeModal = (id: string) => mutation({\n    type: ModalActionType.CloseModal,\n    payload: {\n      id\n    }\n  })\n\n  vm.prototype.closeAllModals = () => mutation({\n    type: ModalActionType.CloseAllModals\n  })\n}\n","import Vue from 'vue'\n\nimport { state } from './state'\n\nexport const installComponent = (vm: typeof Vue) => {\n  vm.component<any, any, any, Record<string, any>>('UseModal', {\n    props: {\n      modalId: {\n        type: String,\n        required: true\n      },\n      isGlobal: {\n        type: Boolean,\n        required: false,\n        default: () => false\n      }\n    },\n    created() {\n      if (!state[this.modalId]) {\n        this.__registerModal__(this.modalId)\n      }\n    },\n    beforeDestroy() {\n      if (!this.isGlobal) {\n        this.__removeModal__(this.modalId)\n      }\n    },\n    computed: {\n      modalState() {\n        const currentState = state[this.modalId]\n\n        return {\n          visible: currentState?.visible,\n          props: currentState?.props ?? {}\n        }\n      }\n    },\n    render() {\n      return this.$scopedSlots.default(this.modalState)\n    }\n  })\n}\n"],"names":["ModalActionType","state","Vue","observable","mutation","value","payload","type","OpenModal","id","Error","visible","props","CloseModal","UpdateModal","originProps","merge","CloseAllModals","Object","keys","forEach","key","RegisterModal","set","RemoveModal","vm","prototype","__registerModal__","__removeModal__","openModal","updateModal","closeModal","closeAllModals","injectMethods","component","modalId","String","required","isGlobal","Boolean","created","this","beforeDestroy","computed","modalState","currentState","render","$scopedSlots","installComponent"],"mappings":"0EAAYA,sRAAZ,SAAYA,GACVA,6BACAA,iCACAA,+BACAA,uCACAA,qCACAA,iCANF,CAAYA,IAAAA,OCaL,IAAMC,EAAQC,EAAIC,WAAgD,IAE5DC,EAAW,SAACC,SACTC,EAAYD,EAAZC,eAAYD,EAAlBE,WAGDP,EAAgBQ,cACdP,QAAMK,SAAAA,EAASG,UACZ,IAAIC,uBAAgBJ,SAAAA,EAASG,uDAErCR,QAAMK,SAAAA,EAASG,IAAKE,SAAU,EAC9BV,QAAMK,SAAAA,EAASG,IAAKG,YAAQN,SAAAA,EAASM,iBAGlCZ,EAAgBa,WACnBZ,QAAMK,SAAAA,EAASG,IAAKE,SAAU,aAG3BX,EAAgBc,gBACdb,QAAMK,SAAAA,EAASG,UACZ,IAAIC,uBAAgBJ,SAAAA,EAASG,2DAE/BM,WAAcd,QAAMK,SAAAA,EAASG,IAAKG,SAAS,GACjDX,QAAMK,SAAAA,EAASG,IAAKG,YAAQN,GAAAA,EAASU,WAChCD,QACAT,SAAAA,EAASM,aACVN,SAAAA,EAASM,iBAGVZ,EAAgBiB,eACnBC,OAAOC,KAAKlB,GAAOmB,SAAQ,SAACC,GAC1BpB,EAAMoB,GAAKV,SAAU,gBAIpBX,EAAgBsB,cACnBpB,EAAIqB,IAAItB,QAAOK,SAAAA,EAASG,GAAK,CAC3BE,SAAS,EACTC,MAAO,gBAINZ,EAAgBwB,mBACZvB,QAAMK,SAAAA,EAASG,sBCnDL,SAACgB,ICDK,SAACA,GAC5BA,EAAGC,UAAUC,kBAAoB,SAAClB,UAAeL,EAAS,CACxDG,KAAMP,EAAgBsB,cACtBhB,QAAS,CACPG,GAAAA,MAIJgB,EAAGC,UAAUE,gBAAkB,SAACnB,UAAeL,EAAS,CACtDG,KAAMP,EAAgBwB,YACtBlB,QAAS,CACPG,GAAAA,MAIJgB,EAAGC,UAAUG,UAAY,SAACpB,EAAYG,UAAgCR,EAAS,CAC7EG,KAAMP,EAAgBQ,UACtBF,QAAS,CACPG,GAAAA,EACAG,MAAAA,MAIJa,EAAGC,UAAUI,YAAc,SAACrB,EAAYG,EAA4BI,UAAoBZ,EAAS,CAC/FG,KAAMP,EAAgBc,YACtBR,QAAS,CACPG,GAAAA,EACAG,MAAAA,EACAI,MAAAA,MAIJS,EAAGC,UAAUK,WAAa,SAACtB,UAAeL,EAAS,CACjDG,KAAMP,EAAgBa,WACtBP,QAAS,CACPG,GAAAA,MAIJgB,EAAGC,UAAUM,eAAiB,kBAAM5B,EAAS,CAC3CG,KAAMP,EAAgBiB,kBDtCxBgB,CAAcR,GEFgB,SAACA,GAC/BA,EAAGS,UAA8C,WAAY,CAC3DtB,MAAO,CACLuB,QAAS,CACP5B,KAAM6B,OACNC,UAAU,GAEZC,SAAU,CACR/B,KAAMgC,QACNF,UAAU,UACD,kBAAM,KAGnBG,mBACOvC,EAAMwC,KAAKN,eACTR,kBAAkBc,KAAKN,UAGhCO,yBACOD,KAAKH,eACHV,gBAAgBa,KAAKN,UAG9BQ,SAAU,CACRC,4BACQC,EAAe5C,EAAMwC,KAAKN,eAEzB,CACLxB,cAASkC,SAAAA,EAAclC,QACvBC,qBAAOiC,SAAAA,EAAcjC,SAAS,MAIpCkC,yBACSL,KAAKM,qBAAqBN,KAAKG,eF/B1CI,CAAiBvB"}