{"version":3,"file":"vue.cjs.development.js","sources":["../../src/enums.ts","../../src/state.ts","../../src/method.ts","../../src/component.ts","../../src/plugin.ts"],"sourcesContent":["export enum ModalActionType {\n  OpenModal = 0,\n  UpdateModal = 1,\n  CloseModal = 2,\n  CloseAllModals = 3,\n  RegisterModal = 4,\n  RemoveModal = 5\n}\n","import Vue from 'vue'\n\nimport { ModalActionType } from './enums'\n\ninterface UpdateStatePayload {\n  readonly type: ModalActionType\n  readonly payload?: {\n    readonly id?: string\n    readonly props?: Record<string, any>\n    readonly merge?: boolean\n  }\n}\n\nexport const state = Vue.observable<Record<string, Record<string, any>>>({})\n\nexport const mutation = (value: UpdateStatePayload) => {\n  const { type, payload } = value\n\n  switch (type) {\n    case ModalActionType.OpenModal:\n      if (!state[payload?.id!]) {\n        throw new Error(`modal '${payload?.id}' not exist, please register it before your use`)\n      }\n      state[payload?.id!].visible = true\n      state[payload?.id!].props = payload?.props!\n    break\n\n    case ModalActionType.CloseModal:\n      state[payload?.id!].visible = false\n      break\n\n    case ModalActionType.UpdateModal:\n      if (!state[payload?.id!]) {\n        throw new Error(`modal '${payload?.id}' not exist, please register it before your use`)\n      }\n      const originProps = state[payload?.id!].props ?? {}\n      state[payload?.id!].props = payload?.merge ? {\n        ...originProps,\n        ...payload?.props!\n      } : payload?.props!\n      break\n\n    case ModalActionType.CloseAllModals:\n      Object.keys(state).forEach((key) => {\n        state[key].visible = false\n      })\n      break\n\n    case ModalActionType.RegisterModal:\n      Vue.set(state, payload?.id!, {\n        visible: false,\n        props: {}\n      })\n      break\n\n    case ModalActionType.RemoveModal:\n      delete state[payload?.id!]\n      break\n\n    default:\n      break\n  }\n}\n","import Vue from 'vue'\nimport { ModalActionType } from './enums'\nimport { mutation } from './state'\n\nexport const injectMethods = (vm: typeof Vue) => {\n  vm.prototype.__registerModal__ = (id: string) => mutation({\n    type: ModalActionType.RegisterModal,\n    payload: {\n      id\n    }\n  })\n\n  vm.prototype.__removeModal__ = (id: string) => mutation({\n    type: ModalActionType.RemoveModal,\n    payload: {\n      id\n    }\n  })\n\n  vm.prototype.openModal = (id: string, props?: Record<string, any>) => mutation({\n    type: ModalActionType.OpenModal,\n    payload: {\n      id,\n      props\n    }    \n  })\n\n  vm.prototype.updateModal = (id: string, props: Record<string, any>, merge?: boolean) => mutation({\n    type: ModalActionType.UpdateModal,\n    payload: {\n      id,\n      props,\n      merge\n    }\n  })\n\n  vm.prototype.closeModal = (id: string) => mutation({\n    type: ModalActionType.CloseModal,\n    payload: {\n      id\n    }\n  })\n\n  vm.prototype.closeAllModals = () => mutation({\n    type: ModalActionType.CloseAllModals\n  })\n}\n","import Vue from 'vue'\n\nimport { state } from './state'\n\nexport const installComponent = (vm: typeof Vue) => {\n  vm.component<any, any, any, Record<string, any>>('UseModal', {\n    props: {\n      modalId: {\n        type: String,\n        required: true\n      },\n      isGlobal: {\n        type: Boolean,\n        required: false,\n        default: () => false\n      }\n    },\n    created() {\n      if (!state[this.modalId]) {\n        this.__registerModal__(this.modalId)\n      }\n    },\n    beforeDestroy() {\n      if (!this.isGlobal) {\n        this.__removeModal__(this.modalId)\n      }\n    },\n    computed: {\n      modalState() {\n        const currentState = state[this.modalId]\n\n        return {\n          visible: currentState?.visible,\n          props: currentState?.props ?? {}\n        }\n      }\n    },\n    render() {\n      return this.$scopedSlots.default(this.modalState)\n    }\n  })\n}\n","import Vue from 'vue'\n\nimport { injectMethods } from './method'\nimport { installComponent } from './component'\n\nexport const install = (vm: typeof Vue) => {\n  injectMethods(vm)\n  installComponent(vm)\n}\n"],"names":["ModalActionType","state","Vue","observable","mutation","value","type","payload","OpenModal","id","Error","visible","props","CloseModal","UpdateModal","originProps","merge","CloseAllModals","Object","keys","forEach","key","RegisterModal","set","RemoveModal","injectMethods","vm","prototype","__registerModal__","__removeModal__","openModal","updateModal","closeModal","closeAllModals","installComponent","component","modalId","String","required","isGlobal","Boolean","created","beforeDestroy","computed","modalState","currentState","render","$scopedSlots","install"],"mappings":"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"}